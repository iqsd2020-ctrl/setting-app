<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ููุญุฉ ุงูููุงุฏุฉ ุงููุฑูุฒูุฉ - ูุญู ุฃูู ุงูุจูุช (ุน)</title>
    
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#1e293b">
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Reem+Kufi:wght@700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,1,0" />
        <script type="importmap">
      {
        "imports": {
          "@google/generative-ai": "https://esm.run/@google/generative-ai"
        }
      }
    </script>
    <script type="module">
      import { GoogleGenerativeAI } from "@google/generative-ai";
      
      window.GoogleGenerativeAI = GoogleGenerativeAI;
    </script>

    <link rel="stylesheet" href="style.css">
</head>

<body class="bg-[#0f172a] text-[#f1f5f9] font-['Amiri'] h-[100dvh] overflow-hidden flex flex-col items-center justify-center selection:bg-amber-500 selection:text-white">

    <div id="side-menu-overlay" class="fixed inset-0 bg-black/50 z-40 hidden transition-opacity duration-300 opacity-0 backdrop-blur-sm"></div>

    <div id="login-screen" class="fixed inset-0 z-[100] flex flex-col items-center justify-center bg-[#0f172a] bg-[url('https://www.transparenttextures.com/patterns/arabesque.png')]">
        <div class="glass p-8 md:p-10 text-center w-full max-w-sm md:max-w-md border border-amber-500/30 relative overflow-hidden shadow-2xl rounded-2xl">
            <div class="absolute top-0 right-0 w-24 h-24 bg-gradient-to-br from-amber-500/20 to-transparent rounded-bl-full"></div>
            <span class="material-symbols-rounded text-6xl text-amber-500 mb-6 drop-shadow-lg block">admin_panel_settings</span>
            <h1 class="text-3xl font-bold text-white mb-2 font-[Reem_Kufi]">ููุญุฉ ุงููุทูุฑ</h1>
            <p class="text-slate-400 text-sm mb-8">ุงููุณุฎุฉ ุงูุดุงููุฉ - ูุญู ุฃูู ุงูุจูุช (ุน)</p>
            <div class="relative group">
                <input type="password" id="admin-pin" class="input-box text-center text-3xl tracking-[0.5em] bg-black/40 border-slate-600 h-16 font-mono text-amber-500 placeholder-slate-700 mb-6 group-hover:border-amber-500/50 w-full rounded-lg" placeholder="โขโขโขโข" maxlength="4" inputmode="numeric" pattern="[0-9]*">
            </div>
            <button id="btn-login" class="btn-gold w-full shadow-lg flex items-center justify-center gap-2 text-lg py-3 rounded-lg font-bold">
                <span>ุชุณุฌูู ุงูุฏุฎูู</span> <span class="material-symbols-rounded">login</span>
            </button>
            <p id="login-msg" class="text-red-400 text-sm mt-4 h-5 font-bold transition-all"></p>
        </div>
    </div>

    <div id="dashboard-container" class="hidden w-full h-full flex overflow-hidden relative">
        
        <aside id="admin-sidebar" class="fixed top-0 right-[-300px] w-72 h-full bg-[#1e293b] border-l border-slate-700 flex flex-col shadow-2xl z-50 transition-all duration-300 md:relative md:right-0 md:flex shrink-0">
            <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-amber-500 to-amber-700"></div>
            
            <div class="p-6 text-center border-b border-slate-700 bg-slate-900/30">
                <h2 class="text-amber-500 font-bold text-2xl font-[Reem_Kufi] drop-shadow-md">ุงูููุตุฉ ุงูุฅุฏุงุฑูุฉ</h2>
                <div class="mt-2 text-[10px] text-slate-500 uppercase tracking-widest">Ultimate Edition</div>
            </div>

            <nav class="flex-1 overflow-y-auto py-4 space-y-1 custom-scrollbar">
                <div class="nav-item active" data-tab="view-dashboard"><span class="material-symbols-rounded text-xl">analytics</span> <span>ูุธุฑุฉ ุนุงูุฉ</span></div>
                <div class="nav-item" data-tab="view-reports"><span class="material-symbols-rounded text-xl text-red-400">report_problem</span> <span>ุงูุจูุงุบุงุช</span></div>
                <div class="nav-item" data-tab="view-users"><span class="material-symbols-rounded text-xl">manage_accounts</span> <span>ุงููุณุชุฎุฏููู</span></div>
                <div class="nav-item" data-tab="view-content"><span class="material-symbols-rounded text-xl">post_add</span> <span>ุฅุถุงูุฉ ูุญุชูู</span></div>
                <div class="nav-item" data-tab="view-manage"><span class="material-symbols-rounded text-xl">library_books</span> <span>ุจูู ุงูุฃุณุฆูุฉ</span></div>
                <div class="nav-item" data-tab="view-system"><span class="material-symbols-rounded text-xl">settings_applications</span> <span>ุงููุธุงู</span></div>
            </nav>

            <div class="p-4 border-t border-slate-700 bg-slate-900/30">
                <button onclick="location.reload()" class="w-full flex items-center justify-center gap-3 text-red-400 hover:text-red-200 hover:bg-red-500/10 p-3 rounded-lg transition text-sm font-bold border border-transparent hover:border-red-500/30">
                    <span class="material-symbols-rounded">power_settings_new</span> <span>ุฎุฑูุฌ</span>
                </button>
            </div>
        </aside>

        <main class="flex-1 flex flex-col h-full bg-[#0f172a] relative min-w-0">
            
            <header class="md:hidden bg-[#1e293b] p-4 flex justify-between items-center border-b border-slate-700 shadow-md z-30 shrink-0">
                <h2 class="text-amber-500 font-bold font-[Reem_Kufi] text-lg">ููุญุฉ ุงูุชุญูู</h2>
                <button id="mobile-menu-btn" class="text-white p-2 hover:bg-white/10 rounded-full transition">
                    <span class="material-symbols-rounded text-3xl">menu</span>
                </button>
            </header>

            <div id="main-view-area" class="flex-1 overflow-y-auto p-4 md:p-8 pb-24 scroll-smooth custom-scrollbar w-full">
   
                <div id="view-dashboard" class="view-section space-y-6 fade-in">
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                        <div class="glass p-3 text-center border-t-4 border-green-500 group flex flex-col justify-between rounded-xl">
                            <div class="mb-2"><span class="material-symbols-rounded text-3xl text-green-400 group-hover:scale-110 transition">quiz</span></div>
                            <div class="mb-2">
                                <div class="text-3xl font-bold text-white font-mono leading-none" id="dash-total-q">-</div>
                                <div class="text-[10px] text-slate-400 font-bold uppercase mt-1">ุฅุฌูุงูู ุงูุฃุณุฆูุฉ</div>
                            </div>
                            <div class="grid grid-cols-2 gap-2 border-t border-slate-700/50 pt-2 mt-1 bg-slate-800/30 rounded-lg p-1">
                                <div class="flex flex-col items-center"><span class="text-green-400 font-bold font-mono text-lg leading-none" id="dash-approved-q">-</span><span class="text-[9px] text-slate-500">ูุนุชูุฏ โ</span></div>
                                <div class="flex flex-col items-center border-r border-slate-700/50"><span class="text-amber-500 font-bold font-mono text-lg leading-none" id="dash-pending-q">-</span><span class="text-[9px] text-slate-500">ูุฑุงุฌุนุฉ โณ</span></div>
                            </div>
                        </div>

                        <div class="glass p-4 text-center border-t-4 border-red-500 hover:bg-slate-800/50 transition cursor-pointer rounded-xl" data-target="view-reports">
                            <span class="material-symbols-rounded text-4xl text-red-400 mb-2">report_problem</span>
                            <div class="text-3xl font-bold text-white font-mono" id="dash-reports-count">-</div>
                            <div class="text-xs text-slate-400 font-bold uppercase mt-1">ุงูุจูุงุบุงุช ุงููุนููุฉ</div>
                        </div>

                        <div class="glass p-4 text-center border-t-4 border-blue-500 hover:bg-slate-800/50 transition cursor-pointer rounded-xl" data-target="view-users">
                            <span class="material-symbols-rounded text-4xl text-blue-400 mb-2">group</span>
                            <div class="text-3xl font-bold text-white font-mono" id="dash-users-count">-</div>
                            <div class="text-xs text-slate-400 font-bold uppercase mt-1">ุงููุณุชุฎุฏููู</div>
                        </div>

                        <div class="glass p-4 text-center border-t-4 border-purple-500 rounded-xl">
                            <span class="material-symbols-rounded text-4xl text-purple-400 mb-2">category</span>
                            <div class="text-3xl font-bold text-white font-mono" id="dash-topics-count">-</div>
                            <div class="text-xs text-slate-400 font-bold uppercase mt-1">ุงูุชุตูููุงุช</div>
                        </div>
                    </div>

                    <div class="glass p-6 border border-slate-700/50 rounded-xl">
                        <div class="flex justify-between items-center mb-4 border-b border-slate-700 pb-2">
                            <h3 class="text-lg font-bold text-white flex items-center gap-2"><span class="material-symbols-rounded text-amber-500">pie_chart</span> ุชูุฒูุน ุงูุฃุณุฆูุฉ</h3>
                            <select id="chart-filter" class="bg-slate-900 border border-slate-700 text-xs rounded px-2 py-1 text-slate-300 outline-none"></select>
                        </div>
                        <div class="relative h-64 w-full"><canvas id="questionsChart"></canvas></div>
                    </div>

                    <div class="glass p-6 border border-slate-700/50 mt-6 rounded-xl">
                        <div class="flex justify-between items-center mb-4 border-b border-slate-700 pb-2">
                            <h3 class="text-lg font-bold text-white flex items-center gap-2"><span class="material-symbols-rounded text-blue-500">ssid_chart</span> ุงููุดุงุท ุงููููู</h3>
                            <span class="text-xs text-slate-400 bg-slate-800 px-2 py-1 rounded">ุขุฎุฑ 14 ููู</span>
                        </div>
                        <div class="relative h-64 w-full"><canvas id="activityChart"></canvas></div>
                    </div>
                </div>

                <div id="view-reports" class="view-section hidden space-y-4 fade-in">
                    <div class="flex justify-between items-center bg-red-900/20 p-4 rounded-xl border border-red-700/30">
                        <h3 class="text-lg md:text-xl text-white font-bold flex items-center gap-3"><span class="material-symbols-rounded text-red-400 bg-red-400/10 p-2 rounded-lg">report_problem</span> ุจูุงุบุงุช ุงูุฃุฎุทุงุก</h3>
                        <button id="btn-refresh-reports" class="bg-slate-700 text-white p-2 rounded-lg hover:bg-slate-600 transition"><span class="material-symbols-rounded">sync</span></button>
                    </div>
                    <div id="reports-grid" class="grid grid-cols-1 lg:grid-cols-2 gap-4"></div>
                </div>

                <div id="view-users" class="view-section hidden space-y-4 fade-in">
                    <div class="flex flex-col md:flex-row justify-between items-center gap-4 bg-slate-800/40 p-4 rounded-xl border border-slate-700/50">
                        <h3 class="text-lg md:text-xl text-white font-bold flex items-center gap-3"><span class="material-symbols-rounded text-blue-400 bg-blue-400/10 p-2 rounded-lg">people_alt</span> ุงููุณุชุฎุฏููู</h3>
                        <div class="flex gap-3 w-full md:w-auto">
                            <div class="relative w-full md:w-72">
                                <span class="material-symbols-rounded absolute right-3 top-2.5 text-slate-500 pointer-events-none">search</span>
                                <input type="text" id="user-search" placeholder="ุจุญุซ ุจุงูุงุณู ุฃู ID..." class="input-box pr-10 py-2 text-sm bg-slate-900/50 rounded-lg w-full">
                            </div>
                            <button id="btn-refresh-users" class="bg-blue-600 text-white p-2 rounded-lg hover:bg-blue-700"><span class="material-symbols-rounded">sync</span></button>
                        </div>
                    </div>
                    <div id="users-grid" class="grid grid-cols-1 gap-3"></div>
                </div>

                <div id="view-content" class="view-section hidden space-y-4 md:space-y-8 fade-in">
                    <h3 class="text-xl text-white font-bold border-b border-slate-700 pb-3 flex items-center gap-3"><span class="material-symbols-rounded text-green-500 bg-green-500/10 p-2 rounded-lg">add_circle</span> ุฅุถุงูุฉ ูุญุชูู</h3>
                    
                    <div class="glass p-6 border-t-4 border-green-500 rounded-xl">
                        <h4 class="text-lg text-green-400 font-bold mb-4 flex items-center gap-2"><span class="material-symbols-rounded">edit_square</span> ุงููุญุฑุฑ ุงููุฏูู</h4>
                        <div class="space-y-4">
                            <input id="man-q" type="text" class="input-box text-lg font-bold bg-slate-800 rounded-lg" placeholder="ูุต ุงูุณุคุงู...">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                                <div class="flex gap-2 bg-slate-800/50 p-2 rounded border border-slate-700"><input type="radio" name="correct_ans_selector" value="0" checked class="accent-green-500"><input id="man-o1" type="text" class="bg-transparent text-white w-full outline-none text-sm" placeholder="ุงูุฎูุงุฑ 1"></div>
                                <div class="flex gap-2 bg-slate-800/50 p-2 rounded border border-slate-700"><input type="radio" name="correct_ans_selector" value="1" class="accent-green-500"><input id="man-o2" type="text" class="bg-transparent text-white w-full outline-none text-sm" placeholder="ุงูุฎูุงุฑ 2"></div>
                                <div class="flex gap-2 bg-slate-800/50 p-2 rounded border border-slate-700"><input type="radio" name="correct_ans_selector" value="2" class="accent-green-500"><input id="man-o3" type="text" class="bg-transparent text-white w-full outline-none text-sm" placeholder="ุงูุฎูุงุฑ 3"></div>
                                <div class="flex gap-2 bg-slate-800/50 p-2 rounded border border-slate-700"><input type="radio" name="correct_ans_selector" value="3" class="accent-green-500"><input id="man-o4" type="text" class="bg-transparent text-white w-full outline-none text-sm" placeholder="ุงูุฎูุงุฑ 4"></div>
                            </div>
                            <textarea id="man-exp" class="input-box h-16 text-sm resize-none rounded-lg" placeholder="ูุนูููุฉ ุฅุซุฑุงุฆูุฉ..."></textarea>
                            <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
                                <select id="man-cat" class="input-box text-xs rounded-lg"></select>
                                <select id="man-topic" class="input-box text-xs rounded-lg" disabled></select>
                                <select id="man-diff" class="input-box text-xs rounded-lg"><option value="ูุชูุณุท">ูุชูุณุท</option><option value="ุณูู">ุณูู</option><option value="ุตุนุจ">ุตุนุจ</option></select>
                                <button id="btn-man-save" class="btn-gold text-sm font-bold shadow-md rounded-lg">ุญูุธ ูุฅุถุงูุฉ</button>
                            </div>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="glass p-6 border-t-4 border-blue-500 rounded-xl">
                            <h4 class="text-lg text-blue-400 font-bold mb-4 flex items-center gap-2"><span class="material-symbols-rounded">cloud_upload</span> ุฑูุน ููู JSON</h4>
                            <div class="grid grid-cols-1 gap-4 mb-4"><select id="upload-cat" class="input-box text-sm rounded-lg"></select><select id="upload-topic" class="input-box text-sm rounded-lg" disabled></select></div>
                            <div class="flex gap-4 items-center flex-wrap">
                                <input type="file" id="json-file-input" accept=".json" class="text-sm text-slate-400 w-full file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:bg-blue-600 file:text-white hover:file:bg-blue-700 cursor-pointer">
                                <button id="btn-upload-file" class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 font-bold w-full md:w-auto">ุฑูุน</button>
                            </div>
                        </div>
                        <div class="glass p-6 border-t-4 border-purple-500 rounded-xl">
                            <h4 class="text-lg text-purple-400 font-bold mb-4 flex items-center gap-2"><span class="material-symbols-rounded">content_paste</span> ูุตู ููุฏ JSON</h4>
                            <div class="grid grid-cols-1 gap-4 mb-4"><select id="paste-cat" class="input-box text-sm rounded-lg"></select><select id="paste-topic" class="input-box text-sm rounded-lg" disabled></select></div>
                            <textarea id="json-paste-area" class="input-box h-20 text-xs font-mono mb-4 bg-slate-900/50 rounded-lg" dir="ltr" placeholder='[{"question":"...","options":[...],"correctAnswer":0}]'></textarea>
                            <button id="btn-paste-upload" class="bg-purple-600 text-white w-full py-2 rounded-lg hover:bg-purple-700 font-bold">ูุนุงูุฌุฉ ูุฅุถุงูุฉ</button>
                        </div>
                    </div>
                </div>

                <div id="view-manage" class="view-section hidden space-y-4 fade-in">
                    <div class="flex flex-col md:flex-row justify-between items-center gap-4 bg-slate-800/40 p-4 rounded-xl border border-slate-700/50">
                        <h3 class="text-lg text-white font-bold flex items-center gap-3"><span class="material-symbols-rounded text-purple-400 bg-purple-400/10 p-2 rounded-lg">library_books</span> ุจูู ุงูุฃุณุฆูุฉ <span id="qs-counter" class="text-xs bg-slate-700 px-2 py-1 rounded-full font-mono">0</span></h3>
                        <div class="flex flex-col md:flex-row gap-3 w-full md:w-auto items-end md:items-center">
                            <input type="text" id="qs-search-input" placeholder="ุจุญุซ ุดุงูู..." class="input-box py-2 text-sm bg-slate-900/50 flex-1 min-w-[150px] rounded-lg">
                            <select id="manage-status-filter" class="input-box text-sm w-full md:w-32 bg-slate-900/50 border-slate-600 rounded-lg">
                                <option value="all">ุงููู</option>
                                <option value="unreviewed" class="text-amber-500 font-bold">โ๏ธ ุบูุฑ ูุฑุงุฌุน</option>
                                <option value="uncategorized" class="text-pink-400 font-bold">๐ ูุฎุงูู ููููุงุฆู</option>
                            </select>
                            <select id="manage-cat-filter" class="input-box text-sm w-full md:w-40 bg-slate-900/50 border-slate-600 rounded-lg">
                                <option value="">ูู ุงูุชุตูููุงุช</option>
                            </select>
                            <select id="manage-topic-filter" class="input-box text-sm w-full md:w-40 bg-slate-900/50 border-slate-600 rounded-lg" disabled>
                                <option value="">ุงูููุถูุน...</option>
                            </select>
                            <button id="btn-refresh-qs" class="bg-slate-600 text-white px-3 py-2 rounded-lg hover:bg-slate-500"><span class="material-symbols-rounded">sync</span></button>
                        </div>
                    </div>
                    <div class="bg-slate-800/20 rounded-xl p-2 min-h-[400px] flex flex-col">
                        <div id="questions-grid" class="space-y-3 mb-4"></div>
                        <button id="btn-load-more" class="hidden w-full py-3 bg-slate-800 hover:bg-slate-700 text-slate-400 hover:text-white rounded-lg border border-dashed border-slate-600 font-bold text-sm">ุชุญููู ุงููุฒูุฏ (200+)</button>
                    </div>
                </div>

                <div id="view-system" class="view-section hidden space-y-4 fade-in">
                    <div class="glass p-6 mb-6 border-r-4 border-r-amber-500 bg-amber-900/10 rounded-xl">
                        <div class="flex justify-between items-start mb-4">
                            <div>
                                <h4 class="text-lg text-amber-500 font-bold flex items-center gap-2"><span class="material-symbols-rounded">campaign</span> ุฑุณุงูุฉ "ูุง ุงูุฌุฏูุฏ"</h4>
                                <p class="text-xs text-slate-400 mt-1">ูุฐู ุงูุฑุณุงูุฉ ุณุชุธูุฑ ูููุณุชุฎุฏููู ูุฑุฉ ูุงุญุฏุฉ ููููุงู.</p>
                            </div>
                            <label class="relative inline-flex items-center cursor-pointer">
                                <input type="checkbox" id="news-active-toggle" class="sr-only peer">
                                <div class="w-11 h-6 bg-slate-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-amber-500"></div>
                                <span class="mr-3 text-sm font-medium text-slate-300">ุชูุนูู</span>
                            </label>
                        </div>
                        <div class="space-y-3">
                            <textarea id="news-message-input" class="input-box h-24 resize-none bg-slate-900/50 border-slate-700 focus:border-amber-500 rounded-lg" placeholder="ุงูุชุจ ุฑุณุงูุชู ูููุณุชุฎุฏููู ููุง..."></textarea>
                            <div class="flex justify-end gap-3">
                                <span id="news-status-msg" class="text-xs font-bold self-center transition-opacity opacity-0">ุชู ุงูุญูุธ ุจูุฌุงุญ โ</span>
                                <button id="btn-save-news" class="btn-gold text-sm px-6 py-2 shadow-lg flex items-center gap-2 rounded-lg"><span class="material-symbols-rounded">save</span> ุญูุธ ููุดุฑ</button>
                            </div>
                        </div>
                    </div>

                    <h3 class="text-xl text-white font-bold border-b border-slate-700 pb-3 flex items-center gap-3"><span class="material-symbols-rounded text-slate-400 bg-slate-700/30 p-2 rounded-lg">settings</span> ุฃุฏูุงุช ุงููุธุงู</h3>
                    
                    <div class="glass p-6 space-y-5 border-r-4 border-r-green-500 rounded-xl">
                        <h4 class="text-lg text-green-400 font-bold"><span class="material-symbols-rounded">download</span> ุชุตุฏูุฑ ูุฎุตุต (Surgical Export)</h4>
                        <div class="grid grid-cols-2 lg:grid-cols-4 gap-4">
                            <select id="export-cat" class="input-box text-xs rounded-lg"></select><select id="export-topic" class="input-box text-xs rounded-lg" disabled></select><select id="export-diff" class="input-box text-xs rounded-lg"><option value="">ูู ุงููุณุชููุงุช</option><option value="ุณูู">ุณูู</option><option value="ูุชูุณุท">ูุชูุณุท</option><option value="ุตุนุจ">ุตุนุจ</option></select>
                            <button id="btn-export-filtered" class="bg-green-600 hover:bg-green-700 text-white w-full py-2 rounded-lg text-sm font-bold" disabled>ุชุตุฏูุฑ JSON</button>
                        </div>
                    </div>
                    <div class="glass p-6 space-y-5 border-r-4 border-r-red-500 bg-red-900/5 rounded-xl">
                        <h4 class="text-lg text-red-400 font-bold"><span class="material-symbols-rounded">delete_sweep</span> ุญุฐู ูุฎุตุต (Surgical Delete)</h4>
                        <div class="grid grid-cols-2 lg:grid-cols-4 gap-4">
                            <select id="delete-cat" class="input-box text-xs rounded-lg"></select><select id="delete-topic" class="input-box text-xs rounded-lg" disabled></select><select id="delete-diff" class="input-box text-xs rounded-lg"><option value="">ูู ุงููุณุชููุงุช</option><option value="ุณูู">ุณูู</option><option value="ูุชูุณุท">ูุชูุณุท</option><option value="ุตุนุจ">ุตุนุจ</option></select>
                            <button id="btn-delete-filtered" class="bg-red-800 hover:bg-red-700 text-red-200 w-full py-2 rounded-lg text-sm font-bold" disabled>ุญุฐู ุงูุญุฒูุฉ</button>
                        </div>
                    </div>

                    <div class="glass p-6 space-y-6 border-4 border-amber-500/50 bg-amber-900/10 relative overflow-hidden rounded-xl">
                        <div class="absolute top-0 left-0 bg-amber-500 text-black text-xs font-bold px-3 py-1 rounded-br-lg z-10">ููุทูุฉ ุญุณุงุณุฉ</div>
                        <div class="text-center mb-4">
                            <h4 class="text-xl text-white font-bold flex items-center justify-center gap-2"><span class="material-symbols-rounded text-amber-500 text-3xl">move_up</span> ูุฑูุฒ ุงูุชุฑุญูู ูุงูููู</h4>
                            <p class="text-xs text-slate-400 mt-2">ููู ุงูุจูุงูุงุช ููุดุฑูุน ุฌุฏูุฏ ูุน ุงูุญูุงุธ ุนูู ุงููุนุฑูุงุช ูุงูุชูุงุฑูุฎ.</p>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div class="bg-slate-900/50 p-4 rounded-xl border border-slate-700/50">
                                <h5 class="text-blue-400 font-bold mb-3 flex items-center gap-2"><span class="material-symbols-rounded">group</span> ุงููุณุชุฎุฏููู</h5>
                                <div class="grid grid-cols-2 gap-2">
                                    <button id="btn-export-users-json" class="bg-slate-700 hover:bg-blue-600 text-white py-2 rounded-lg text-xs font-bold transition flex items-center justify-center gap-1"><span class="material-symbols-rounded">download</span> ุชุตุฏูุฑ</button>
                                    <label class="bg-slate-700 hover:bg-green-600 text-white py-2 rounded-lg text-xs font-bold transition flex items-center justify-center gap-1 cursor-pointer"><span class="material-symbols-rounded">upload</span> ุงุณุชูุฑุงุฏ <input type="file" id="file-import-users" accept=".json" class="hidden"></label>
                                </div>
                                <div id="progress-users" class="text-[10px] text-center mt-2 text-slate-400 h-4"></div>
                            </div>
                            <div class="bg-slate-900/50 p-4 rounded-xl border border-slate-700/50">
                                <h5 class="text-purple-400 font-bold mb-3 flex items-center gap-2"><span class="material-symbols-rounded">library_books</span> ุงูุฃุณุฆูุฉ</h5>
                                <div class="grid grid-cols-2 gap-2">
                                    <button id="btn-export-questions-json" class="bg-slate-700 hover:bg-purple-600 text-white py-2 rounded-lg text-xs font-bold transition flex items-center justify-center gap-1"><span class="material-symbols-rounded">download</span> ุชุตุฏูุฑ</button>
                                    <label class="bg-slate-700 hover:bg-green-600 text-white py-2 rounded-lg text-xs font-bold transition flex items-center justify-center gap-1 cursor-pointer"><span class="material-symbols-rounded">upload</span> ุงุณุชูุฑุงุฏ <input type="file" id="file-import-questions" accept=".json" class="hidden"></label>
                                </div>
                                <div id="progress-questions" class="text-[10px] text-center mt-2 text-slate-400 h-4"></div>
                            </div>
                            <div class="bg-slate-900/50 p-4 rounded-xl border border-slate-700/50">
                                <h5 class="text-red-400 font-bold mb-3 flex items-center gap-2"><span class="material-symbols-rounded">folder_open</span> ุฃุฎุฑู</h5>
                                <div class="grid grid-cols-2 gap-2">
                                    <button id="btn-export-others-json" class="bg-slate-700 hover:bg-red-600 text-white py-2 rounded-lg text-xs font-bold transition flex items-center justify-center gap-1"><span class="material-symbols-rounded">download</span> ุชุตุฏูุฑ</button>
                                    <label class="bg-slate-700 hover:bg-green-600 text-white py-2 rounded-lg text-xs font-bold transition flex items-center justify-center gap-1 cursor-pointer"><span class="material-symbols-rounded">upload</span> ุงุณุชูุฑุงุฏ <input type="file" id="file-import-others" accept=".json" class="hidden"></label>
                                </div>
                                <div id="progress-others" class="text-[10px] text-center mt-2 text-slate-400 h-4"></div>
                            </div>
                        </div>
                    </div>

                    <div class="glass p-6 flex justify-between items-center border-r-4 border-r-red-600 bg-red-900/10 rounded-xl">
                        <div><h4 class="text-red-400 font-bold">ููุทูุฉ ุงูุฎุทุฑ (Nuke)</h4><p class="text-xs text-slate-400">ุชุตููุฑ ุงููุธุงู ุจุงููุงูู</p></div>
                        <button id="btn-nuke" class="bg-red-900 hover:bg-red-800 text-white px-6 py-2 rounded-lg font-bold text-sm border border-red-700">ุชุตููุฑ</button>
                    </div>
                </div> 

            </div> </main>
    </div> <div id="user-edit-modal" class="modal-overlay fixed inset-0 bg-black/85 z-[100] hidden items-center justify-center p-4 backdrop-blur-sm opacity-0 transition-opacity">
        <div class="modal-content bg-[#1e293b] w-full max-w-2xl border border-slate-600 rounded-xl shadow-2xl overflow-y-auto max-h-[85vh] p-6 border-t-4 border-t-amber-500 transform scale-95 transition-transform">
            <h3 class="text-xl font-bold text-amber-500 mb-6 flex items-center gap-2">
                <span class="material-symbols-rounded">manage_accounts</span> ุชุญูู ุดุงูู ุจุงููุณุชุฎุฏู
            </h3>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="space-y-4">
                    <h4 class="text-white font-bold border-b border-slate-700 pb-2">๐ค ุงููููุฉ ูุงูุฃูุงู</h4>
                    <div class="flex flex-col items-center mb-4 gap-2 bg-slate-800/50 p-4 rounded-xl border border-slate-700">
                        <div id="edit-avatar-preview" class="w-20 h-20 rounded-full bg-slate-700 flex items-center justify-center text-3xl border-2 border-amber-500 overflow-hidden shadow-lg relative"></div>
                        <div class="flex gap-2 w-full justify-center">
                            <label class="text-[10px] bg-blue-600 hover:bg-blue-500 text-white px-3 py-1.5 rounded cursor-pointer transition">ุชุบููุฑ<input type="file" id="upload-new-avatar" accept="image/*" class="hidden"></label>
                            <button id="btn-del-avatar" class="text-[10px] bg-red-600/30 hover:bg-red-600/50 text-red-300 px-3 py-1.5 rounded transition hidden">ุญุฐู</button>
                        </div>
                    </div>
                    <div><label class="text-xs text-slate-400 font-bold block mb-1">ุงูุงุณู ุงูุธุงูุฑ</label><input type="text" id="edit-name" class="input-box bg-slate-800 rounded-lg"></div>
                    <div><label class="text-xs text-slate-400 font-bold block mb-1">ูููุฉ ุงููุฑูุฑ</label><input type="text" id="edit-pass" class="input-box bg-slate-800 rounded-lg" placeholder="ุงุชุฑูู ูุงุฑุบุงู ูุนุฏู ุงูุชุบููุฑ"></div>
                    <div class="bg-red-900/10 p-3 rounded border border-red-900/30"><label class="flex items-center gap-2 cursor-pointer"><input type="checkbox" id="edit-banned" class="w-5 h-5 accent-red-500 rounded"><span class="text-red-300 text-sm font-bold">ุญุธุฑ ุงูุญุณุงุจ (Ban)</span></label></div>
                </div>

                <div class="space-y-4">
                    <h4 class="text-white font-bold border-b border-slate-700 pb-2">๐ ุงูุฅุญุตุงุฆูุงุช ูุงููุชุตุฏุฑูู</h4>
                    <div><label class="text-xs text-amber-500 font-bold block mb-1">ุงูููุงุท ุงูุนุงูุฉ (High Score)</label><input type="number" id="edit-score" class="input-box bg-slate-800 border-amber-500/30 font-mono text-lg font-bold text-amber-400 rounded-lg"></div>
                    <div class="grid grid-cols-2 gap-3">
                        <div><label class="text-[10px] text-slate-400 block mb-1">ุนุฏุฏ ุงูุฌููุงุช</label><input type="number" id="edit-quizzes-played" class="input-box bg-slate-900 text-sm rounded-lg"></div>
                        <div><label class="text-[10px] text-slate-400 block mb-1">ุฅุฌุงุจุงุช ุตุญูุญุฉ</label><input type="number" id="edit-total-correct" class="input-box bg-slate-900 text-sm rounded-lg"></div>
                    </div>
                    <div class="bg-slate-800/50 p-3 rounded-xl border border-slate-700 space-y-3">
                        <div class="text-xs text-green-400 font-bold flex items-center gap-1"><span class="material-symbols-rounded text-sm">trophy</span> ุงูุชุญูู ุจุงููุชุตุฏุฑูู</div>
                        <div class="grid grid-cols-2 gap-3">
                            <div><label class="text-[10px] text-slate-400 block mb-1">ุงูุฃุณุจูุน</label><input type="number" id="edit-weekly-score" class="input-box bg-slate-900 border-green-900/50 text-green-400 font-mono text-sm rounded-lg"></div>
                            <div><label class="text-[10px] text-slate-400 block mb-1">ุงูุดูุฑ</label><input type="number" id="edit-monthly-score" class="input-box bg-slate-900 border-green-900/50 text-green-400 font-mono text-sm rounded-lg"></div>
                        </div>
                    </div>
                    <div><label class="text-xs text-purple-400 font-bold block mb-1">ุงูุฃูุณูุฉ (IDs)</label><input type="text" id="edit-badges" class="input-box bg-slate-900 text-xs font-mono text-purple-300 rounded-lg" placeholder="lover_imam_ali_lvl1, ..."></div>
                </div>
            </div>

            <div class="flex flex-col gap-3 mt-8 border-t border-slate-700 pt-4">
                <div class="flex gap-3">
                    <button id="btn-save-user" class="btn-gold flex-1 shadow-md py-3 text-sm rounded-lg">ุญูุธ ูุชุญุฏูุซ ุงูุจูุงูุงุช</button>
                    <button onclick="document.getElementById('user-edit-modal').classList.remove('active', 'flex'); document.getElementById('user-edit-modal').classList.add('hidden')" class="bg-slate-700 hover:bg-slate-600 text-white px-6 rounded-lg font-bold transition">ุฅูุบุงุก</button>
                </div>
                <button id="btn-delete-user-permanent" class="w-full border border-red-500/30 text-red-400 hover:bg-red-900/20 hover:border-red-500 py-2 rounded-lg text-xs font-bold transition flex items-center justify-center gap-2 opacity-60 hover:opacity-100"><span class="material-symbols-rounded text-base">delete_forever</span> ุญุฐู ุงููุณุชุฎุฏู ููุงุฆูุงู</button>
            </div>
        </div>
    </div>

    <div id="question-edit-modal" class="modal-overlay fixed inset-0 bg-black/85 z-[100] hidden items-center justify-center p-4 backdrop-blur-sm opacity-0 transition-opacity">
        <div class="modal-content bg-[#1e293b] w-full max-w-lg border border-slate-600 rounded-xl shadow-2xl overflow-y-auto max-h-[85vh] p-6 border-t-4 border-t-blue-500 transform scale-95 transition-transform">
            <div class="flex justify-between mb-4 pb-3 border-b border-slate-700">
                <h3 class="text-lg font-bold text-blue-500 flex items-center gap-2"><span class="material-symbols-rounded">edit_note</span> ุชุนุฏูู ุงูุณุคุงู</h3>
                <button onclick="document.getElementById('question-edit-modal').classList.remove('active', 'flex'); document.getElementById('question-edit-modal').classList.add('hidden')" class="text-slate-400 hover:text-white transition">โ</button>
            </div>
            <div class="space-y-4">
                <input id="edit-q-text" type="text" class="input-box text-lg font-bold bg-slate-800 border-slate-600 rounded-lg">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                    <div class="flex gap-2 bg-slate-800/50 p-2 rounded border border-slate-700"><input type="radio" name="edit_ans_selector" value="0" class="accent-blue-500"><input id="edit-o1" type="text" class="bg-transparent text-white w-full outline-none text-sm"></div>
                    <div class="flex gap-2 bg-slate-800/50 p-2 rounded border border-slate-700"><input type="radio" name="edit_ans_selector" value="1" class="accent-blue-500"><input id="edit-o2" type="text" class="bg-transparent text-white w-full outline-none text-sm"></div>
                    <div class="flex gap-2 bg-slate-800/50 p-2 rounded border border-slate-700"><input type="radio" name="edit_ans_selector" value="2" class="accent-blue-500"><input id="edit-o3" type="text" class="bg-transparent text-white w-full outline-none text-sm"></div>
                    <div class="flex gap-2 bg-slate-800/50 p-2 rounded border border-slate-700"><input type="radio" name="edit_ans_selector" value="3" class="accent-blue-500"><input id="edit-o4" type="text" class="bg-transparent text-white w-full outline-none text-sm"></div>
                </div>
                <textarea id="edit-q-exp" class="input-box h-20 text-sm resize-none bg-slate-800/50 rounded-lg" placeholder="ุงูุดุฑุญ..."></textarea>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
                    <select id="edit-q-cat" class="input-box text-xs rounded-lg"></select>
                    <select id="edit-q-topic" class="input-box text-xs rounded-lg"></select>
                    <select id="edit-q-diff" class="input-box text-xs rounded-lg"><option value="ูุชูุณุท">ูุชูุณุท</option><option value="ุณูู">ุณูู</option><option value="ุตุนุจ">ุตุนุจ</option></select>
                </div>
                
                <div class="flex gap-3 pt-2">
                    <button id="btn-modal-toggle-review" class="flex-1 border border-slate-600 rounded-lg text-slate-400 hover:bg-slate-700 transition font-bold">ุญุงูุฉ ุงููุฑุงุฌุนุฉ</button>
                    <button id="btn-save-edit-q" class="flex-[2] bg-blue-600 text-white py-3 rounded-lg font-bold shadow-lg hover:bg-blue-700 transition">ุญูุธ ุงูุชุนุฏููุงุช</button>
                </div>
            </div>
        </div>
    </div>

    <div id="toast" class="fixed bottom-8 left-1/2 transform -translate-x-1/2 bg-slate-900/95 text-white px-8 py-4 rounded-2xl shadow-2xl border border-amber-500/40 hidden z-[150] flex items-center gap-4 transition-all duration-300 backdrop-blur-md min-w-[320px] justify-center opacity-0 translate-y-5">
        <span class="material-symbols-rounded text-amber-500 text-2xl" id="toast-icon">check_circle</span>
        <span id="toast-msg" class="text-sm font-bold"></span>
    </div>

    <script type="module" src="app.js"></script>
    
        <div id="ai-modal" class="modal-overlay fixed inset-0 bg-black/85 z-[200] hidden items-center justify-center p-4 backdrop-blur-sm opacity-0 transition-opacity">
        <div class="modal-content bg-[#1e293b] w-full max-w-lg border border-indigo-500/50 rounded-xl shadow-2xl overflow-y-auto max-h-[90vh] p-0 transform scale-95 transition-transform flex flex-col">
            
            <div class="bg-indigo-900/30 p-4 border-b border-indigo-500/30 flex justify-between items-center">
                <h3 class="text-lg font-bold text-indigo-400 flex items-center gap-2">
                    <span class="material-symbols-rounded">psychology</span> ุชูุฑูุฑ ุงููุณุงุนุฏ ุงูุฐูู
                </h3>
                <button onclick="document.getElementById('ai-modal').classList.remove('active', 'flex'); document.getElementById('ai-modal').classList.add('hidden')" class="text-slate-400 hover:text-white transition">โ</button>
            </div>

            <div class="p-6 space-y-4">
                <div id="ai-status-container" class="flex justify-center mb-2">
                    <span id="ai-status-badge" class="px-4 py-1 rounded-full text-sm font-bold border flex items-center gap-2">
                        </span>
                </div>

                <div class="bg-slate-900/50 p-4 rounded-lg border border-slate-700/50">
                    <h4 class="text-xs text-slate-400 font-bold mb-2">ุงูููุงุญุธุงุช:</h4>
                    <p id="ai-feedback-text" class="text-sm text-slate-200 leading-relaxed"></p>
                </div>

                <div id="ai-correction-section" class="hidden space-y-2 fade-in">
                    <h4 class="text-xs text-amber-500 font-bold">โ๏ธ ุงูุชุตุญูุญ ุงูููุชุฑุญ ููุณุคุงู:</h4>
                    <textarea id="ai-suggested-q" class="w-full h-20 bg-slate-800 border border-amber-500/30 rounded p-2 text-sm text-white resize-none focus:outline-none focus:border-amber-500" readonly></textarea>
                </div>

                <div class="space-y-2">
                    <h4 class="text-xs text-blue-400 font-bold">๐ก ุงูุดุฑุญ ุงูููุชุฑุญ:</h4>
                    <textarea id="ai-suggested-exp" class="w-full h-20 bg-slate-800 border border-blue-500/30 rounded p-2 text-sm text-white resize-none focus:outline-none focus:border-blue-500" readonly></textarea>
                </div>
            </div>

            <div class="p-4 border-t border-slate-700 bg-slate-900/30 flex gap-3">
                <button onclick="document.getElementById('ai-modal').classList.remove('active', 'flex'); document.getElementById('ai-modal').classList.add('hidden')" class="flex-1 py-2 rounded-lg text-slate-400 hover:text-white hover:bg-slate-700 font-bold text-sm transition">ุฅุบูุงู</button>
                <button id="btn-apply-ai-fix" class="flex-[2] bg-indigo-600 hover:bg-indigo-500 text-white py-2 rounded-lg font-bold text-sm shadow-lg transition flex items-center justify-center gap-2">
                    <span class="material-symbols-rounded text-base">auto_fix</span> ุชุทุจูู ุงูุชุตุญูุญุงุช
                </button>
            </div>
        </div>
    </div>

</body>
</html>

